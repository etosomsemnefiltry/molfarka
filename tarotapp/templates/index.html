{% load static %}

<!DOCTYPE html>
<html>
   <head>
      <!-- basic -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <!-- mobile metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <!-- site metas -->
      <title>–ú–æ–ª—å—Ñ–∞—Ä–∫–∞ - –≤–æ—Ä–æ–∂—ñ–Ω–Ω—è –∑ —à—Ç—É—á–Ω–∏–º —ñ–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º. –ü–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è –≤—ñ–¥ –®–Ü</title>
      <meta name="keywords" content="">
      <meta name="description" content="–®–≤–∏–¥–∫—ñ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è –¢–∞—Ä–æ –≤—ñ–¥ –ú–æ–ª—å—Ñ–∞—Ä–∫–∞ - —à–≤–∏–¥–∫–∏–π —à–ª—è—Ö –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å. –û—Ñ—ñ—Ü—ñ–π–Ω–∏–π —Å–∞–π—Ç">
      <!-- bootstrap css -->
      <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}">
      <!-- style css -->
      <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
      <!-- Responsive-->
      <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
      <!-- fevicon -->
      <link rel="icon" href="{% static 'images/molfarka.png' %}" type="image/gif" />
      <!-- fonts -->
      <link href="https://fonts.googleapis.com/css?family=Poppins:400,700|Sen:400,700,800&display=swap" rel="stylesheet">
      <!-- Scrollbar Custom CSS -->
      <link rel="stylesheet" href="{% static 'css/jquery.mCustomScrollbar.min.css' %}">
      <!-- Tweaks for older IEs-->
      <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
      <script>
         $.ajaxSetup({
           headers: { "X-CSRFToken": '{{ csrf_token }}' }
         });
       </script>
       <!-- Google tag (gtag.js) -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-XEMLCQ65YQ"></script>
      <script>
         window.dataLayer = window.dataLayer || [];
         function gtag(){dataLayer.push(arguments);}
         gtag('js', new Date());

         gtag('config', 'G-XEMLCQ65YQ');
      </script>
   </head>
   <body>
      <div class="header_section">
         <div class="container">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
               <a class="navbar-brand mx-auto"href="index.html"><img src="{% static 'images/molfarka-logo.png' %}"></a>
               <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
               <span class="navbar-toggler-icon"></span>
               </button>
               
            </nav>
         </div>
         <!-- banner section start --> 
         <div class="banner_section layout_padding">
            <div id="my_slider" class="carousel slide" data-ride="carousel">
               <div class="carousel-inner">
                  <div class="carousel-item active">
                     <div class="container">
                        <div class="row">
                           <div class="col-md-6">
                              <h1 class="banner_taital">–í–æ—Ä–æ–∂—ñ–Ω–Ω—è <br>–æ–Ω–ª–∞–π–Ω –∑–∞ –®–Ü</h1>
                              <div class="banner_text_yellow">–ú–æ–ª—å—Ñ–∞ÃÅ—Ä ‚Äî –≤ —É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ–π –≥—É—Ü—É–ª—å—Å—å–∫—ñ–π –∫—É–ª—å—Ç—É—Ä—ñ –ª—é–¥–∏–Ω–∞, —è–∫—ñ–π –ø—Ä–∏–ø–∏—Å—É—î—Ç—å—Å—è –Ω–∞–¥—ñ–ª–µ–Ω—ñ—Å—Ç—å –Ω–∞–¥–ø—Ä–∏—Ä–æ–¥–Ω–∏–º–∏ –∑–¥—ñ–±–Ω–æ—Å—Ç—è–º–∏. –ú–æ–ª—å—Ñ–∞—Ä –ø–æ—î–¥–Ω—É—î —Ä–∏—Å–∏ –∑–Ω–∞—Ö–∞—Ä—è, —á–∞—Ä—ñ–≤–Ω–∏–∫–∞ —Ç–∞ –≤–æ—Ä–æ–∂–±–∏—Ç–∞.</div>
                             <!--  <div class="read_bt"><a href="#">–°–ø—Ä–æ–±—É–π</a></div> --> 
                           </div>
                           <div class="col-md-6">
                              <div class="banner_img"><img src="{% static 'images/banner-1.png' %}"></div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <!-- banner section end -->
      </div>
      <!-- header section end -->
      <!-- hosting section start -->
      <div class="hosting_section layout_padding">
         <div class="container">
            <div class="row">
               <div class="col-md-8">
                  <h1 class="hosting_taital">–û–ë–ï–†–ò, –ó–ê–ü–ò–¢–ê–ô, –û–¢–†–ò–ú–ê–ô –í–Ü–î–ü–û–í–Ü–î–¨</h1>
                  <p class="hosting_text"> –ù–∞–π—Ç–æ—á–Ω—ñ—à—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ, –∫–æ–ª–∏ —î –ø–æ—è—Å–Ω–µ–Ω–Ω—è –≤–∞—à–æ—ó —Å–∏—Ç—É–∞—Ü—ñ—ñ –∞–±–æ –ø–æ–±–∞–∂–∞–Ω–Ω—è ;)</p>
                  <div class="hosting_question mt-3">
                     <label for="question">–í–∞—à–µ –ø–∏—Ç–∞–Ω–Ω—è (–±—É–¥—å —è–∫–∞ –º–æ–≤–∞):</label>
                     <textarea type="text" id="question" name="question" class="form-control" maxlength="500" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –©–æ –º–µ–Ω–µ —á–µ–∫–∞—î —É –∫–æ—Ö–∞–Ω–Ω—ñ?"></textarea>
                  </div>
               </div>
               <div class="col-md-4 mt-auto hosting-settings">
                  <div class="mb-3 d-flex flex-column">
                     <label for="deck">–û–±–µ—Ä—ñ—Ç—å –∫–æ–ª–æ–¥—É:</label>
                     <select id="deck" name="deck" class="form-select">
                       {% for deck in decks %}
                         <option value="{{ deck.slug }}" data-max="{{ deck.max_cards }}">{{ deck.name }}</option>
                       {% endfor %}
                     </select>
                   </div>
                   <div class="mb-3 d-flex flex-column">
                     <label for="count">–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∫–∞—Ä—Ç:</label>
                     <input type="number" id="count" name="count" class="form-control" value="3" min="1" max="10">
                   </div>
                  <button id="ask" class="click_bt">–û—Ç—Ä–∏–º–∞—Ç–∏ –ø–µ—Ä–µ–¥–±–∞—á–µ–Ω–Ω—è</button>
               </div>
            </div>
            <div class="mt-4 hosting_answer testimonial_section_2 d-none" id="response" style="white-space: pre-wrap;"></div>
         </div>
      </div>
      <!-- hosting section end -->
     
      <div class="simple_section layout_padding">
         <div class="container">
            <div class="row">
               <div class="col-12">
                  
                  <h3 class="h2">–î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.</h3>
                  <p class="h5">–®–∞–Ω–æ–≤–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ, –∑—Ä–æ–±–ª–µ–Ω–æ –¥–ª—è –≤–∞—Å. –ö–æ—Ä–∏—Å—Ç—É–π—Ç–µ—Å—å –Ω–∞ –∑–¥–æ—Ä–æ–≤'—è!</p>
                  <p class="h5">–£ –ø–æ–¥–∞–ª—å—à–æ–º—É —è –±—É–¥—É –Ω–∞–º–∞–≥–∞—Ç–∏—Å—è –ø–æ–∫—Ä–∞—â—É–≤–∞—Ç–∏ —Å–≤–æ—ó –≤—ñ–¥–ø–æ–≤–∏–¥—ñ –Ω–∞ –≤–∞—à—ñ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è —Ç–∞ —Ä–æ–∑—à–∏—Ä—é–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª.</p>
               </div>
            </div>
         </div>
      </div>
     
      <!-- copyright section start -->
      <div class="copyright_section">
         <div class="container">
            <p class="copyright_text">2025 Molfarka</p>
         </div>
      </div>
      <!-- copyright section end -->
      <!-- Javascript files-->
      <script src="{% static 'js/jquery.min.js' %}"></script>
      <script src="{% static 'js/popper.min.js' %}"></script>
      <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
      <script src="{% static 'js/jquery-3.0.0.min.js' %}"></script>
      <script src="{% static 'js/plugin.js' %}"></script>
      <!-- sidebar -->
      <script src="{% static 'js/jquery.mCustomScrollbar.concat.min.js' %}"></script>
      <script src="{% static 'js/custom.js' %}"></script>

      <script>
         $(document).ready(function () {
           $('#deck').on('change', function () {
             let max = $(this).find(':selected').data('max');
             $('#count').attr('max', max);
             if (parseInt($('#count').val()) > max) {
               $('#count').val(max);
             }
           });
       
           $('#ask').click(function () {

            gtag('event', 'click', {
               'event_category': 'prediction',
               'event_label': 'Ask button clicked'
            });

             let question = $('#question').val();
             let deck = $('#deck').val();
             let count = $('#count').val();

            if (!question) {
               $('#response').removeClass('d-none').html('‚ö†Ô∏è –ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –ø–∏—Ç–∞–Ω–Ω—è –ø–µ—Ä–µ–¥ –≤–æ—Ä–æ–∂—ñ–Ω–Ω—è–º.');
               return;
            }

            if (count < 1 || count > 10) {
               $('#response').removeClass('d-none').html('‚ö†Ô∏è –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∫–∞—Ä—Ç –º–∞—î –±—É—Ç–∏ –≤—ñ–¥ 1 –¥–æ 10.');
               return;
            }
       
             $('#response').removeClass('d-none').html('üîÆ –ú–æ–ª—å—Ñ–∞—Ä–∫–∞ —Ç–∞—Å—É—î –∫–∞—Ä—Ç–∏...');
             
             // Choose cards
             $.post('/draw/', JSON.stringify({
               deck: deck,
               count: count
             }), function (drawData) {
               let cards = drawData.cards;
               $('#response').html(`üÉè –û—Å—å —è–∫—ñ –∫–∞—Ä—Ç–∏ –≤–∏–ø–∞–ª–∏:<br><b>${cards.join(', ')}</b><br><br>‚ú® –¢–ª—É–º–∞—á–µ–Ω–Ω—è –≤–∞—à–æ–≥–æ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è...`);
               
               // Explain
               $.post('/predict/', JSON.stringify({
                 question: question,
                 cards: cards,
                 deck: deck
               }), function (resultData) {
                 $('#response').append('<br><br>' + resultData.result);
               }, 'json').fail(function () {
                 $('#response').append('<br>üòî –í–∏–Ω–∏–∫–ª–∞ –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Ç–ª—É–º–∞—á–µ–Ω–Ω—ñ.');
               });
       
             }, 'json').fail(function () {
               $('#response').html('üòî –í–∏–Ω–∏–∫–ª–∞ –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤–∏–±–æ—Ä—ñ –∫–∞—Ä—Ç.');
             });
           });
         });
       </script>

   </body>
</html>